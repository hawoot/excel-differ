# Excel Differ Workflow: Bitbucket â†’ Local Folder
# Use case: Pull Excel files from Bitbucket, save flattened outputs locally

# Logging configuration
logging:
  log_dir: ./logs
  log_level: INFO  # DEBUG, INFO, WARNING, ERROR

# State file configuration
state:
  file_path: ./tmp/state/.excel-differ-state.json

source:
  implementation: bitbucket
  config:
    url: https://api.bitbucket.org/2.0/repositories/myworkspace/my-repo
    branch: main
    download_dir: ./tmp/downloads     # Where Bitbucket files are downloaded
    include_patterns:
      - "data/**/*.xlsx"
      - "reports/**/*.xlsm"
    exclude_patterns:
      - "**/archive/**"
      - "**/temp/**"
    depth: 1  # Only process latest commit if no sync state

destination:
  implementation: local_folder
  config:
    folder_path: ./tmp/output           # Output directory (will be created)

converter:
  implementation: noop
  config: {}

flattener:
  implementation: openpyxl
  config:
    include_computed: false
    include_literal: true
    include_formats: true
