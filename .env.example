# Excel Diff Server Configuration
# Copy this file to .env and adjust values for your environment

# ============================================================================
# Server Settings
# ============================================================================
HOST=0.0.0.0
PORT=8000
LOG_LEVEL=INFO

# ============================================================================
# Snapshot Repository (Repo B) Settings
# ============================================================================
# Git repository where flattened snapshots will be committed
# Examples:
#   SSH: git@github.com:myorg/excel-snapshots.git
#   HTTPS with token: https://YOUR_TOKEN@github.com/myorg/excel-snapshots.git
SNAPSHOT_REPO_URL=git@github.com:myorg/excel-snapshots.git

# Local path where the snapshot repository will be cloned/maintained
SNAPSHOT_REPO_LOCAL_PATH=/tmp/snapshot-repo

# ============================================================================
# Git Authentication & User Info
# ============================================================================
# Name and email used for git commits
GIT_USER_NAME=Excel Diff Server
GIT_USER_EMAIL=excel-diff@example.com

# For SSH authentication:
#   - Ensure SSH keys are set up in ~/.ssh/id_rsa (or configure ssh-agent)
#   - Add your public key to GitHub/GitLab
#
# For HTTPS authentication:
#   - Include personal access token in SNAPSHOT_REPO_URL
#   - Example: https://ghp_yourtoken@github.com/myorg/excel-snapshots.git

# ============================================================================
# LibreOffice Converter (for XLSB files)
# ============================================================================
# Path to LibreOffice binary
# Linux/Docker: /usr/bin/libreoffice
# macOS: /Applications/LibreOffice.app/Contents/MacOS/soffice
# Windows: C:\Program Files\LibreOffice\program\soffice.exe
CONVERTER_PATH=/usr/bin/libreoffice

# ============================================================================
# Upload & Processing Limits
# ============================================================================
# Maximum file upload size in bytes (default: 200MB)
MAX_UPLOAD_BYTES=209715200

# Timeout for extraction jobs in seconds (default: 15 minutes)
EXTRACTION_TIMEOUT_SECONDS=900

# ============================================================================
# Job & Result Storage
# ============================================================================
# How long to keep job results before cleanup (default: 10 hours)
RESULT_TTL_SECONDS=36000

# Directory for temporary job artifacts
TEMP_STORAGE_PATH=/tmp/excel-differ

# ============================================================================
# Job Queue Configuration
# ============================================================================
# Backend for job queue: 'celery' or 'multiprocessing'
# Use 'celery' for production (requires Redis)
# Use 'multiprocessing' for simple setups without Redis
QUEUE_BACKEND=celery

# ============================================================================
# Celery Settings (only needed if QUEUE_BACKEND=celery)
# ============================================================================
# Redis connection URL for Celery broker and result backend
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Number of concurrent worker processes
WORKER_CONCURRENCY=4

# ============================================================================
# Extraction Options
# ============================================================================
# Include evaluated values by default (can be overridden per request)
# false = faster extraction, smaller snapshots
# true = includes formula results, larger snapshots
INCLUDE_EVALUATED_DEFAULT=false

# ============================================================================
# Advanced Features (optional)
# ============================================================================
# Enable callback/webhook support (future enhancement)
CALLBACKS_ENABLED=false
